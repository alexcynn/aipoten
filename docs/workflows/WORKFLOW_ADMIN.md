# 관리자 플로우

## 목차
1. [콘텐츠 관리 플로우](#1-콘텐츠-관리-플로우)
2. [사용자 관리 플로우](#2-사용자-관리-플로우)
3. [치료사 인증 관리 플로우](#3-치료사-인증-관리-플로우)
4. [매칭 및 상담 관리](#4-매칭-및-상담-관리)
5. [통계 및 리포트](#5-통계-및-리포트)

---

## 1. 콘텐츠 관리 플로우

### 1.1 발달 체크리스트 관리

```
관리자 대시보드
  ↓
[발달 체크 관리] 메뉴
  ↓
연령대별 체크리스트 확인
  - 0-6개월
  - 7-12개월
  - 13-18개월
  - ...
  - 72개월 이상
  ↓
체크리스트 수정
  - 질문 추가/삭제/수정
  - 평가 기준 조정
  - 영역별 가중치 설정
  ↓
전문가 검토 요청 (선택)
  ↓
변경사항 적용
  ↓
버전 관리 (이전 버전 보관)
```

### 1.2 놀이영상 관리

```
[놀이영상 관리] 메뉴
  ↓
새 영상 업로드
  - 영상 파일 업로드 또는 외부 링크
  - 썸네일 이미지
  ↓
영상 정보 입력
  - 제목
  - 설명
  - 대상 연령
  - 발달 영역 태그
  - 준비물
  - 놀이 시간
  - 난이도
  ↓
카테고리 분류
  ↓
미리보기 및 검수
  ↓
게시 또는 예약 게시
  ↓
영상 통계 확인
  - 조회수
  - 북마크 수
  - 완료 체크 수
  - 평균 시청 시간
```

**주요 기능:**
- 영상 일괄 업로드
- 외부 링크 관리 (YouTube, 네이버TV 등)
- 시리즈 영상 관리
- 영상 성과 분석

## 2. 사용자 관리 플로우

```
[사용자 관리] 메뉴
  ↓
사용자 목록 확인
  - 전체 사용자
  - 부모 사용자
  - 치료사
  ↓
필터 및 검색
  - 가입일
  - 구독 상태
  - 활동 상태
  ↓
사용자 상세 정보
  - 기본 정보
  - 활동 이력
  - 결제 이력
  - 고객 문의 이력
  ↓
계정 관리
  - 계정 정지
  - 경고 발송
  - 메모 작성
```

## 3. 치료사 인증 관리 플로우

### 3.1 치료사 승인 프로세스

```
관리자 대시보드
  ↓
[치료사 관리] 메뉴
  ↓
상단 통계 확인
  - 전체: XX명
  - 신청: XX명 (PENDING - 회원가입만 한 상태)
  - 대기: XX명 (WAITING - 프로필 제출 완료, 승인 대기 중)
  ↓
필터 탭으로 목록 조회
  - 전체: 모든 치료사
  - 신청: PENDING 상태 (프로필 미제출)
  - 대기: WAITING 상태 (승인 대기)
  - 승인됨: APPROVED 상태
  - 거부됨: REJECTED 상태
  ↓
테이블 형식으로 치료사 목록 확인
  컬럼: 이름, 연락처, 전문분야, 경력, 상담료, 상태, 가입일, 관리
  ↓
컬럼별 검색 필터 사용
  - 이름/이메일/전화번호 통합 검색
  - 전문분야 드롭다운 필터
  ↓
특정 치료사 [상세보기] 클릭
  ↓
치료사 상세 정보 확인
  ┌─────────────────────────────────────┐
  │ 치료사 상세 정보                    │
  ├─────────────────────────────────────┤
  │ 기본 정보:                          │
  │ - 이름, 이메일, 전화번호            │
  │ - 성별, 생년                        │
  │ - 주소                              │
  │                                     │
  │ 전문 정보:                          │
  │ - 전문 분야 (복수)                  │
  │ - 대상 아동 연령 (복수)             │
  │ - 서비스 가능 지역 (복수)           │
  │ - 50분 기준 상담료                  │
  │ - 예비 치료사 여부                  │
  │ - 학력                              │
  │ - 자기소개                          │
  │                                     │
  │ 자격증 정보 (복수):                 │
  │ [자격증 1]                          │
  │ - 자격증명                          │
  │ - 발급기관                          │
  │ - 취득일                            │
  │ - 첨부파일 [다운로드]               │
  │                                     │
  │ 경력 정보 (복수):                   │
  │ [경력 1]                            │
  │ - 고용 형태 (기관/프리랜서)         │
  │ - 기관명                            │
  │ - 치료 분야                         │
  │ - 근무 기간                         │
  │ - 상세 설명                         │
  │                                     │
  │ 현재 상태: WAITING                  │
  │ 가입일: 2025-10-20                  │
  └─────────────────────────────────────┘
  ↓
관리자 검토 및 판단
  ↓
[승인] 또는 [거부] 버튼 클릭
  ↓
[승인 시]
  - approvalStatus: WAITING → APPROVED
  - approvedAt: 현재 시각 기록
  - approvedBy: 관리자 ID 기록
  - 치료사 계정 활성화 (모든 기능 사용 가능)
  - 승인 완료 이메일 발송
  - 성공 메시지: "치료사가 승인되었습니다"
  ↓
[거부 시]
  - 거부 사유 입력 모달 표시
  - 사유 입력 후 제출
  - approvalStatus: WAITING → REJECTED
  - rejectedAt: 현재 시각 기록
  - rejectionReason: 거부 사유 저장
  - 거부 알림 이메일 발송 (사유 포함)
  - 재신청 안내 (프로필 수정 후 재제출 가능)
  - 성공 메시지: "치료사 신청이 반려되었습니다"
```

### 3.2 치료사 상태 전환도

```
[PENDING]
회원가입 직후
로그인 가능
프로필 작성 필요
    ↓
프로필 제출
    ↓
[WAITING]
관리자 승인 대기
로그인 가능
프로필 수정 가능
매칭/예약 불가
    ↓
    ├─→ [승인] → [APPROVED]
    │              모든 기능 사용 가능
    │              매칭, 예약, 스케줄 관리
    │
    └─→ [거부] → [REJECTED]
                   로그인 가능
                   프로필 수정 가능
                   재신청 가능
                        ↓
                   프로필 수정 후
                   재제출 시
                        ↓
                   [WAITING] 상태로 복귀
```

### 3.3 관리자 권한 및 기록

- **승인 시 기록:**
  - `approvedAt`: 승인 시각
  - `approvedBy`: 승인한 관리자의 User ID

- **거부 시 기록:**
  - `rejectedAt`: 거부 시각
  - `rejectionReason`: 거부 사유 (관리자 입력)

- **재신청:**
  - 거부된 치료사는 프로필을 수정하여 재제출 가능
  - 재제출 시 `approvalStatus`가 REJECTED → WAITING으로 변경
  - 이전 거부 사유는 이력으로 보관

## 4. 매칭 및 상담 관리

```
[매칭 관리] 메뉴
  ↓
전체 매칭 현황 확인
  - 매칭 요청 수
  - 승인율
  - 상담 완료율
  ↓
문제 상황 모니터링
  - 미응답 치료사
  - 반복 거절 사례
  - 상담 취소 사례
  ↓
분쟁 조정
  - 환불 요청 처리
  - 불만 사항 중재
```

## 5. 통계 및 리포트

```
[통계 대시보드] 메뉴
  ↓
주요 지표 확인
  - DAU/MAU
  - 신규 가입자 수
  - 발달 체크 완료 수
  - 영상 재생 수
  - 매칭 성사 수
  - 구독 전환율
  ↓
상세 분석
  - 연령대별 사용 패턴
  - 인기 영상 TOP 10
  - 지역별 치료사 분포
  - 이탈률 분석
  ↓
리포트 생성
  - 주간/월간 리포트
  - 맞춤 리포트 (기간, 지표 선택)
  ↓
리포트 내보내기 (PDF, Excel)
```

---

## 관련 문서
- [부모 사용자 플로우](./WORKFLOW_PARENT.md)
- [치료사 플로우](./WORKFLOW_THERAPIST.md)
- [시스템 연동 플로우](./WORKFLOW_SYSTEM.md)
- [메인 워크플로우 인덱스](../WORKFLOW.md)
